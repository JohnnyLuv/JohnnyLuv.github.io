---
title: å¾®ä¿¡å°ç¨‹åº ç»„ä»¶bindtapå’ŒåŠ¨æ€æ•°æ®æ¸²æŸ“çš„ä¸€äº›é—®é¢˜
date: 2018-04-29 17:50:03
categories: wechat
tags: [wechat, miniprogran]
---
### å…ˆæ¥çœ‹é—®é¢˜ï¼Œæ”¹å˜ç»„ä»¶çŠ¶æ€ä¼šä½¿å…¶ `class` ä¸¢å¤±
![done](http://osd27mrkh.bkt.clouddn.com/180429_part_2.gif "å¸Œæœ›æ˜¯è¿™æ ·å­ğŸ˜»")

![done](http://osd27mrkh.bkt.clouddn.com/180429_part_1.gif "ç»“æœæ˜¯è¿™æ ·å­ğŸ˜¹")

<!-- more -->
### part-1 ç›´æ¥ä¿®æ”¹ data
```html
  <!-- é¢œè‰²åˆ†ç±» -->
  <view class="color-size">
    <view class="tit">é¢œè‰²åˆ†ç±»</view>
    <view class="tags">
      <text class="tag {{item.onSelect?'active':''}}" wx:for="{{tags}}" wx:key="{{index}}" data-index="{{index}}" bindtap="skuTagsHandle">{{item.value}}</text>
    </view>
  </view>
```
```js
Component({
  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    tags: [
      {onSelect:false,value:'90cm'},
      {onSelect:false,value:'100cm'},
      {onSelect:false,value:'110cm'},
      {onSelect:false,value:'120cm'},
      {onSelect:false,value:'130cm'},
      {onSelect:false,value:'140cm'},
      {onSelect:false,value:'150cm'}
    ]
  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    skuTagsHandle (e) { // é€‰æ‹© sku æ§åˆ¶
      let _idx = e.currentTarget.dataset.index
      let _tags = this.data.tags
      // console.log(_idx)
      this.data.tags.filter((item, index) => {
        if (index === _idx) {
          let _key = `tags[${_idx}].onSelect`
          let _val = !this.data.tags[_idx].onSelect
          this.setData({
            [_key]:_val
          })
        } else if (index !== _idx) {
          item.onSelect = false
          let _key = `tags[${index}].onSelect`
          let _val = false
          this.setData({
            [_key]:_val
          })
        }
      })
    }
  }
})
```
ç„¶è€Œç†æƒ³å¾ˆä¸°æ»¡ï¼Œç°å®å¾ˆéª¨æ„Ÿï¼ŒæŒ‰ç…§å¾€å¸¸çš„é€»è¾‘å†™`components`å¥½åƒè¡Œä¸é€šğŸ™ˆï¼Œç»§ç»­å°è¯•~

### part-2 å®šä¹‰å˜é‡ä»£æ›¿èµ‹å€¼
```html
  <!-- é¢œè‰²åˆ†ç±» -->
  <view class="color-size">
    <view class="tit">é¢œè‰²åˆ†ç±»</view>
    <view class="tags">
      <text class="tag {{item.onSelect?'active':''}}" wx:for="{{tags}}" wx:key="{{index}}" data-index="{{index}}" bindtap="skuTagsHandle">{{item.value}}</text>
    </view>
  </view>
```
```js
Component({
  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    tags: [
      {onSelect:false,value:'90cm'},
      {onSelect:false,value:'100cm'},
      {onSelect:false,value:'110cm'},
      {onSelect:false,value:'120cm'},
      {onSelect:false,value:'130cm'},
      {onSelect:false,value:'140cm'},
      {onSelect:false,value:'150cm'}
    ]
  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    skuTagsHandle (e) { // é€‰æ‹© sku æ§åˆ¶
      let _idx = e.currentTarget.dataset.index
      let _tags = this.data.tags
      _tags.filter((item, index) => {
        if (index === _idx) {
          item.onSelect = !item.onSelect
        } else {
          item.onSelect = false
        }
      })
      this.setData({
        tags: _tags
      })
    }
  }
})
```
ç„¶è€Œè¿˜æ˜¯ä¸ç”Ÿæ•ˆï¼Œå¹¶ä¸æ˜¯ä¿®æ”¹`data`çš„å§¿åŠ¿ä¸æ­£ç¡®ğŸ™ˆï¼Œç»§ç»­å°è¯•~

### part-3 é€šè¿‡å¾ªç¯ä¸‹æ ‡ç´¢å¼•åˆ‡æ¢`class`
```html
<view class="tags">
  <text class="tag {{index===currTag?'active':''}}" wx:for="{{tags}}" wx:key="{{index}}" data-index="{{index}}" bindtap="skuTagsHandle">{{item}}</text>
</view>
```
```js
Component({
  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    currTag: null,
    tags: [
      '90cm',
      '100cm',
      '110cm',
      '120cm',
      '130cm',
      '140cm',
      '150cm'
    ]
  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    skuTagsHandle (e) { // é€‰æ‹© sku æ§åˆ¶
      let _idx = e.currentTarget.dataset.index
      console.log(_idx)
      this.setData({
        currTag: _idx
      })
    }
  }
})
```
ä¾ç„¶ä¸ç”Ÿæ•ˆï¼Œå‡ è¿‘ç»æœ›ï¼Œä¸æ”¹`data`ä¹Ÿä¸è¡Œçš„è¯ï¼Œé‚£å°±ä¸æ˜¯æ•°æ®çš„é—®é¢˜äº†ğŸ™ˆï¼Œç»§ç»­å°è¯•

### part-4 æ€€ç–‘æ˜¯`for`å¾ªç¯çš„é—®é¢˜ï¼Œå¯¼è‡´åŠ¨æ€æ•°æ®ä¸èƒ½åŠ¨æ€ç»‘å®š`class`
```html
<view class="tags">
  <view class="tag {{testkey==='0'?'active':''}}" data-index="0" bindtap="test">aa</view>
  <view class="tag {{testkey==='1'?'active':''}}" data-index="1" bindtap="test">bb</view>
  <view class="tag {{testkey==='2'?'active':''}}" data-index="2" bindtap="test">cc</view>
  <view class="tag {{testkey==='3'?'active':''}}" data-index="3" bindtap="test">dd</view>
</view>
```
```js
Component({
  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    testkey: '0',
  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    test (e) {
      let _idx = e.currentTarget.dataset.index
      this.setData({
        testkey: _idx
      })
    }
  }
})
```
è¿™å¯èƒ½æ˜¯æˆ‘å¯ä»¥æƒ³å‡ºæ¥çš„æ‰€æœ‰çªç ´å£äº†ï¼Œåªå¥½ç»§ç»­ç”¨æœ€ç¬¨çš„æ–¹æ³•é€ä¸ªè¯•é”™ğŸ˜¹ï¼Œç»§ç»­å°è¯•~

### part-5 æŠŠå­ç»„ä»¶ä»£ç ç…§æ¬åˆ°çˆ¶é¡µé¢çœ‹èƒ½å¦å®ç°
æ—¢ä¸æ˜¯`js`èµ‹å€¼å‡ºäº†é—®é¢˜ï¼Œä¹Ÿæ˜¯ä¸`for`å¾ªç¯å‡ºäº†é—®é¢˜ï¼Œéš¾é“æ˜¯è‡ªå®šä¹‰ç»„ä»¶çš„é—®é¢˜ï¼ŸæŠŠä»£ç æ‹·è´ç‰‡æ®µæ‹·è´åˆ°çˆ¶é¡µé¢ï¼Œæœç„¶é—®é¢˜æ²¡æœ‰é‡ç°ï¼Œ**ç¡®å®šäº†æ˜¯`component`çš„é—®é¢˜**ï¼Œä½†æ˜¯è¿˜æ˜¯è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ä½¿ç”¨çš„ï¼Œç»§ç»­æ‰¾åŸå› 

### part-6 æŠŠ`<text>`æ¢æˆ`<view>`ï¼Œé—®é¢˜è§£å†³ï¼Œå‰4ç§æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ ‡ç­¾æ¢æˆ`<view>`å°±å¯ä»¥äº†ï¼Œæˆ–è€…ä¿®æ”¹`display`ä¸º`block`å³å¯ã€‚
```html
<view class="tags">
  <view class="tag {{item.onSelect?'active':''}}" wx:for="{{tags}}" wx:key="{{index}}" data-index="{{index}}" bindtap="skuTagsHandle">{{item.val}}</view>
</view>
```
```js
Component({
  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    currTag: null,
    tags: [
      {onSelect:0,val:'90cm'},
      {onSelect:0,val:'100cm'},
      {onSelect:0,val:'110cm'},
      {onSelect:0,val:'120cm'},
      {onSelect:0,val:'130cm'},
      {onSelect:0,val:'140cm'},
      {onSelect:0,val:'150cm'}
    ]
  },
  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    skuTagsHandle (e) { // é€‰æ‹© sku æ§åˆ¶
      let _idx = e.currentTarget.dataset.index
      let _tags = this.data.tags

      _tags.filter((item, index) => {
        index === _idx ?
          item.onSelect = !item.onSelect :
          item.onSelect = 0
      })

      this.setData({
        tags: _tags
      })
    }
  }
})
```

### æ€»ç»“ï¼šç»è¿‡æµ‹è¯•ï¼Œå‘ç°å¹¶ä¸æ˜¯æ ‡ç­¾çš„é—®é¢˜ï¼Œè€Œæ˜¯æ ‡ç­¾çš„`display`å±æ€§çš„é—®é¢˜ã€‚å½“`display:inline`æ—¶ï¼Œä¼šå‘ç”Ÿä¸Šè¿°å¼‚å¸¸ï¼Œå¹¶ä¸”ä¸èƒ½è§¦å‘`bindtap`äº‹ä»¶ã€‚ä¹Ÿè®¸è¿˜æœ‰å…¶ä»–äºæ­¤ç›¸å…³çš„é—®é¢˜ï¼Œå¦‚æœæœ‰å‘ç°ï¼Œå¸Œæœ›å¯ä»¥ç•™è¨€äº¤æµï¼Œæ„Ÿè°¢ï¼